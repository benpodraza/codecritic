#!/usr/bin/env python
import sys
import unittest
from pathlib import Path


def main():
    test_dir = Path(sys.argv[-1]) if len(sys.argv) > 1 else Path('tests')
    suite = unittest.defaultTestLoader.discover(str(test_dir))
    runner = unittest.TextTestRunner()
    result = runner.run(suite)
    return 0 if result.wasSuccessful() else 1


if __name__ == '__main__':
    sys.exit(main())
